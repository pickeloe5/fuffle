var __webpack_modules__={65:(e,t,s)=>{s.d(t,{Z:()=>r});var n=s(891);const r=class{#e=[];observer=null;constructor(e=null){this.observer=e}start(e=this.observer){return this.observer=e,this.runTracked(),e.addEventListener("write",this.#t),this}onStop(){}stop(){return this.observer?.removeEventListener("write",this.#t),this.onStop(),this}run(){}withRun(e){return this.run=e,this}onRun(e){}withOnRun(e){return this.onRun=e,this}runTracked(){const e=this.observer.trackReads(),t=this.run.call(this.observer.proxy);this.#e=e(),this.onRun(t)}#t=({propertyPath:e})=>{this.#e.some((0,n.pathEquals)(e))&&this.runTracked()}}},51:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _Base_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(65);class Binding extends _Base_js__WEBPACK_IMPORTED_MODULE_0__.Z{state={js:"",locals:null};constructor(e){super(),e&&(this.state.js=e),this.run=this.#s()}withLocals(e={}){return this.state.locals=e,this}withJs(e){return this.state.js=e,this.observer&&this.runTracked(),this}#s(){const{state}=this;return function(){let js="";if(state.locals)for(const e in state.locals)js+=`const ${e}=state.locals.${e}?.(this, '${e}');`;return eval(js+state.js)}}}const __WEBPACK_DEFAULT_EXPORT__=Binding},891:(e,t,s)=>{s.r(t),s.d(t,{EventName:()=>r,pathEquals:()=>n});const n=e=>t=>{if(t.length!==e.length)return!1;for(let s in e)if(t[s]!==e[s])return!1;return!0},r={ATTRIBUTE_CHANGED:"fuffle-attribute-changed"}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var s=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](s,s.exports,__webpack_require__),s.exports}__webpack_require__.d=(e,t)=>{for(var s in t)__webpack_require__.o(t,s)&&!__webpack_require__.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{__webpack_require__.d(__webpack_exports__,{KX:()=>r.Z,Oj:()=>i.Z,wA:()=>f,VZ:()=>m,vi:()=>o,vW:()=>v,d4:()=>w,Qj:()=>n,YS:()=>b,R:()=>p,D5:()=>e});var e=__webpack_require__(891);class t{static instance=new t}class s extends EventTarget{static resolve(e){return e&&e instanceof t?e.observer:null}static fromArray(e){const t=s.resolve(e);return Array.isArray(t?.target)?t:null}target=null;proxy=null;#n=null;parent=null;#r=null;constructor(e,t=!1){if(super(),this.target=e,!t){this.#r={};for(const t in e)this.#i(t)}this.proxy=this.#a()}withParent(e,t){return this.parent=e,this.#n=t,this}#o=null;trackReads(){if(this.#o)throw new Error("Concurrent modification exception");return this.#o=[],this.#h}#h=()=>{const e=[...this.#o];return this.#o=null,e};onRead(t){this.#o&&!this.#o.includes((0,e.pathEquals)(t))&&this.#o.push(t),this.parent?.onRead([this.#n,...t])}onWrite(e,t){const s=new Event("write");s.propertyPath=e,s.propertyValue=t,this.dispatchEvent(s),this.parent?.onWrite([this.#n,...e],t)}#i(e,t=this.target[e]){this.#r&&(t&&"object"==typeof t&&t!==this?this.#r[e]=new s(t).withParent(this,e):this.#r.hasOwnProperty(e)&&(this.#r[e].parent=null,delete this.#r[e]))}#a(){return new Proxy(this.target,{getPrototypeOf:e=>t.instance,get:(e,t,s)=>{if("observer"===t)return this;let n;return n=this.#r?.hasOwnProperty(t)?this.#r[t].proxy:Reflect.get(e,t,s),"function"==typeof n&&(n=n.bind(s)),this.onRead([t]),n},set:(e,t,s,n)=>{const r=Reflect.set(e,t,s,n);return this.#i(t,s),this.onWrite([t],s),r}})}}const n=s;var r=__webpack_require__(51),i=__webpack_require__(65);class a extends HTMLElement{static getInstance(e){return e.#c}static getObserver(e){const t=this.getInstance(e);if(!t)return null;const s=t.constructor?.getObserver(t);return s||null}static getParent(e){for(;e=e.parentNode;)if(e instanceof this)return this.getObserver(e);return null}static ComponentImpl=null;static get observedAttributes(){return this.ComponentImpl.Attribute?Object.values(this.ComponentImpl.Attribute):[]}#c;constructor(){super(),this.#c=new this.constructor.ComponentImpl(this),this.addEventListener(e.EventName.ATTRIBUTE_CHANGED,this.#l)}#l=({attributeName:e,attributeValue:t})=>{this.#c.onAttributeChanged(e,t)};connectedCallback(){this.isConnected&&setTimeout((()=>{this.#c.onConnected(a.getParent(this))}),0)}disconnectedCallback(){this.#c.onDisconnected()}attributeChangedCallback(e,t,s){this.#c.onAttributeChanged(e,s)}}const o=a;class h extends r.Z{#_=null;#n="";#u=!1;constructor(e,t,s,n=!1){super(s),this.#_=e,this.#n=t,this.#u=!!n}onRun(t){this.#u&&this.#_.setAttribute(this.#n,t);const s=new Event(e.EventName.ATTRIBUTE_CHANGED);s.attributeName=this.#n,s.attributeValue=t,this.#_.dispatchEvent(s)}}class c extends r.Z{#_=null;#n="";#p=null;constructor(e,t,s){super(s),this.#_=e,this.#n=t}onStop(){this.#p&&this.#_.removeEventListener(this.#n,this.#p)}onRun(e){this.onStop(),this.#_.addEventListener(this.#n,e),this.#p=e}}class l extends r.Z{#_=null;constructor(e,t=""){super(`\`${t}\``),this.#_=e}onRun(e){this.#_.nodeValue=e}}class _ extends r.Z{#_=null;constructor(e,t){super(t),this.#_=e}onRun(e){this.#_.value=e}}class u{static getTextMode(e,t=!1){let s=!1;return e.hasAttribute(u.Attribute.TEXT)&&(s=e.getAttribute(u.Attribute.TEXT)===u.Text.SHALLOW?u.Text.SHALLOW:u.Text.DEEP),s||t===u.Text.SHALLOW||(s=t),s}static Text={SHALLOW:"shallow",DEEP:"deep"};static Attribute={TEXT:"data-f-text",VALUE:"data-f-value"};static Prefix={ATTRIBUTE:"data-f:",ATTRIBUTE_STRING:"data-f-s:",EVENT:"data-f-on:"};#d;#b=null;#m=[];#f=null;children=[];constructor(e,t){this.children=e,this.#d=t}withParent(e){this.#f=e;for(const t of this.children)e.appendChild(t);return this}withLocals(e){return this.#b=e,this}start(e){this.#w(this.children,this.#d);for(const t of this.#m)t.start(e);return this}stop(){for(const e of this.#m)e.stop();return this}withoutParent(){if(this.#f)for(const e of this.children)this.#f.removeChild(e);return this.#f=null,this}#w(e,t){for(const s of e)switch(s.nodeType){case Node.TEXT_NODE:this.#v(s,t);break;case Node.ELEMENT_NODE:this.#x(s,t)}}#v(e,t){if(!t)return;const s=e.nodeValue;e.nodeValue="",this.#m.push(new l(e,s).withLocals(this.#b))}#x(e,t){for(const t of e.getAttributeNames())this.#k(e,t);e instanceof o||this.#w(e.childNodes,u.getTextMode(e,t))}#k(e,t){if(t===u.Attribute.VALUE)return void this.#m.push(new _(e,e.getAttribute(t)));const[s,n]=this.#g(t);if(!s)return;const r=e.getAttribute(t);switch(s===u.Prefix.ATTRIBUTE_STRING&&e.removeAttribute(t),s){case u.Prefix.ATTRIBUTE:this.#m.push(new h(e,n,r).withLocals(this.#b));break;case u.Prefix.ATTRIBUTE_STRING:this.#m.push(new h(e,n,r,!0).withLocals(this.#b));break;case u.Prefix.EVENT:this.#m.push(new c(e,n,r).withLocals(this.#b))}}#g(e){for(const t of Object.values(u.Prefix))if(e.startsWith(t))return[t,e.substring(t.length)];return["",e]}}const p=u;class d{static fromNode(e){return new d([...e.content.childNodes],p.getTextMode(e))}#r=[];#d=!1;constructor(e,t=!1){this.#r=e,this.#d=t}bake(){return new p(this.#r.map((e=>e.cloneNode(!0))),this.#d)}}const b=d,m=class{static fromElement(e){return e instanceof o?o.getInstance(e):null}static getObserver(e){return null}static defineElement(e){const t=this,s=class extends o{static ComponentImpl=t};return customElements.define(e,s),s}constructor(e){}onConnected(e){}onAttributeChanged(e,t){}onDisconnected(){}},f=class extends m{static getObserver(e){return e.#E}static template=null;#T=null;#E=null;#A=this.constructor.template?.bake();#r=null;constructor(e){super(e),this.#T=e}onConnected(){if(this.#E=new n(this),!this.#A){this.#r=[...this.#T.childNodes];for(const e of this.#r)this.#T.removeChild(e);this.#A=new b(this.#r).bake()}this.#A.withParent(this.#T).start(this.#E)}onDisconnected(){if(this.#A?.stop().withoutParent(),this.#r){for(const e of this.#r)this.#T.appendChild(e);this.#r=null}}};class w extends m{static Attribute={CONDITION:"data-condition"};#T=null;#A=null;#r=null;#C=null;#p=!1;constructor(e){super(e),this.#T=e}onDisconnected(){this.#A?.stop().withoutParent(),this.#A=null}onConnected(e){this.#C=e,this.#r=[...this.#T.childNodes];for(const e of this.#r)this.#T.removeChild(e);this.#A=new p(this.#r),this.#p&&this.#O()}#O(){this.#C&&this.#A.withParent(this.#T).start(this.#C)}#y(){this.#A.stop().withoutParent()}onAttributeChanged(e,t){e===w.Attribute.CONDITION&&(t=!!t)!==this.#p&&(this.#p=t,t?this.#O():this.#y())}}w.defineElement("fuffle-if");class v extends m{static Attribute={ARRAY:"data-array",NAME:"data-name",INDEX_NAME:"data-index-name"};#C=null;#P=null;#T=null;#r=null;#A=null;#N=[];#R="it";#I="index";constructor(e){super(e),this.#T=e}onDisconnected(){if(this.#P?.removeEventListener("write",this.#t),this.#L(),this.#C=null,this.#r)for(const e of this.#r)this.#T.appendChild(e)}onConnected(e){this.#C=e,this.#r=[...this.#T.childNodes],this.#A=new b(this.#r);for(const e of this.#r)this.#T.removeChild(e);this.#B()}onAttributeChanged(e,t){switch(e){case v.Attribute.NAME:this.#R=t,this.#D();break;case v.Attribute.INDEX_NAME:this.#I=t,this.#D();break;case v.Attribute.ARRAY:this.#M(t)}}#D(){for(const e in this.#N)this.#N[e].withLocals(this.#S(e))}#M(e){this.#P?.removeEventListener("write",this.#t),this.#L(),this.#P=n.fromArray(e),this.#B()}#B(){if(this.#P&&this.#C){for(const e in this.#P.target)this.#W(e);this.#P.addEventListener("write",this.#t)}}#L(){for(;this.#N.length;)this.#j()}#t=({propertyPath:e,propertyValue:t})=>{if(1===e.length&&"length"===e[0]&&t!==this.#r.length){for(let e=this.#r.length;e<t;e++)this.#W(e);for(let e=this.#r.length-1;e>=t;e--)this.#j()}};#W(e,t=this.#P.target[e]){this.#N.push(this.#A.bake().withLocals(this.#S(e)).withParent(this.#T).start(this.#C))}#j(){this.#N.pop().stop().withoutParent()}#S(e){return{[this.#R]:()=>this.#P.proxy[e],[this.#I]:()=>e}}}v.defineElement("fuffle-for")})();var __webpack_exports__Binding=__webpack_exports__.KX,__webpack_exports__BindingBase=__webpack_exports__.Oj,__webpack_exports__Component=__webpack_exports__.wA,__webpack_exports__ComponentBase=__webpack_exports__.VZ,__webpack_exports__ComponentElement=__webpack_exports__.vi,__webpack_exports__FuffleFor=__webpack_exports__.vW,__webpack_exports__FuffleIf=__webpack_exports__.d4,__webpack_exports__Observer=__webpack_exports__.Qj,__webpack_exports__Template=__webpack_exports__.YS,__webpack_exports__TemplateInstance=__webpack_exports__.R,__webpack_exports__util=__webpack_exports__.D5;export{__webpack_exports__Binding as Binding,__webpack_exports__BindingBase as BindingBase,__webpack_exports__Component as Component,__webpack_exports__ComponentBase as ComponentBase,__webpack_exports__ComponentElement as ComponentElement,__webpack_exports__FuffleFor as FuffleFor,__webpack_exports__FuffleIf as FuffleIf,__webpack_exports__Observer as Observer,__webpack_exports__Template as Template,__webpack_exports__TemplateInstance as TemplateInstance,__webpack_exports__util as util};