var __webpack_modules__={65:(e,t,s)=>{s.d(t,{Z:()=>n});var r=s(891);const n=class{#e=[];observer=null;constructor(e=null){this.observer=e}start(e=this.observer){return this.observer=e,this.runTracked(),e.addEventListener("write",this.#t),this}onStop(){}stop(){return this.observer?.removeEventListener("write",this.#t),this.onStop(),this}run(){}withRun(e){return this.run=e,this}onRun(e){}withOnRun(e){return this.onRun=e,this}runTracked(){const e=this.observer.trackReads(),t=this.run.call(this.observer.proxy);this.#e=e(),this.onRun(t)}#t=({propertyPath:e})=>{this.#e.some((0,r.pathEquals)(e))&&this.runTracked()}}},51:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _Base_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(65);class Binding extends _Base_js__WEBPACK_IMPORTED_MODULE_0__.Z{state={js:"",locals:null};constructor(e){super(),e&&(this.state.js=e),this.run=this.#s()}withLocals(e={}){return this.state.locals=e,this}withJs(e){return this.state.js=e,this.observer&&this.runTracked(),this}#s(){const{state}=this;return function(){let js="";if(state.locals)for(const e in state.locals)js+=`const ${e}=state.locals.${e}?.(this, '${e}');`;return eval(js+state.js)}}}const __WEBPACK_DEFAULT_EXPORT__=Binding},891:(e,t,s)=>{s.r(t),s.d(t,{EventName:()=>n,pathEquals:()=>r});const r=e=>t=>{if(t.length!==e.length)return!1;for(let s in e)if(t[s]!==e[s])return!1;return!0},n={ATTRIBUTE_CHANGED:"fuffle-attribute-changed"}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var s=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](s,s.exports,__webpack_require__),s.exports}__webpack_require__.d=(e,t)=>{for(var s in t)__webpack_require__.o(t,s)&&!__webpack_require__.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{__webpack_require__.d(__webpack_exports__,{KX:()=>n.Z,Oj:()=>i.Z,wA:()=>w,VZ:()=>m,vi:()=>o,vW:()=>v,d4:()=>f,Qj:()=>r,YS:()=>b,R:()=>p,D5:()=>e});var e=__webpack_require__(891);class t{static instance=new t}class s extends EventTarget{static resolve(e){return e&&e instanceof t?e.observer:null}static fromArray(e){const t=s.resolve(e);return Array.isArray(t?.target)?t:null}target=null;proxy=null;#r=null;parent=null;#n=null;constructor(e,t=!1){if(super(),this.target=e,!t){this.#n={};for(const t in e)this.#i(t)}this.proxy=this.#a()}withParent(e,t){return this.parent=e,this.#r=t,this}#o=null;trackReads(){if(this.#o)throw new Error("Concurrent modification exception");return this.#o=[],this.#h}#h=()=>{const e=[...this.#o];return this.#o=null,e};onRead(t){this.#o&&!this.#o.includes((0,e.pathEquals)(t))&&this.#o.push(t),this.parent?.onRead([this.#r,...t])}onWrite(e,t){const s=new Event("write");s.propertyPath=e,s.propertyValue=t,this.dispatchEvent(s),this.parent?.onWrite([this.#r,...e],t)}#i(e,t=this.target[e]){this.#n&&(t&&"object"==typeof t&&t!==this?this.#n[e]=new s(t).withParent(this,e):this.#n.hasOwnProperty(e)&&(this.#n[e].parent=null,delete this.#n[e]))}#a(){return new Proxy(this.target,{getPrototypeOf:e=>t.instance,get:(e,t,s)=>{if("observer"===t)return this;let r;return r=this.#n?.hasOwnProperty(t)?this.#n[t].proxy:Reflect.get(e,t,s),"function"==typeof r&&(r=r.bind(s)),this.onRead([t]),r},set:(e,t,s,r)=>{const n=Reflect.set(e,t,s,r);return this.#i(t,s),this.onWrite([t],s),n}})}}const r=s;var n=__webpack_require__(51),i=__webpack_require__(65);class a extends HTMLElement{static getInstance(e){return e.#_}static getObserver(e){const t=this.getInstance(e);if(!t)return null;const s=t.constructor?.getObserver(t);return s||null}static getParent(e){for(;e=e.parentNode;)if(e instanceof this)return this.getObserver(e);return null}static ComponentImpl=null;static get observedAttributes(){return this.ComponentImpl.Attribute?Object.values(this.ComponentImpl.Attribute):[]}#_;constructor(){super(),this.#_=new this.constructor.ComponentImpl(this),this.addEventListener(e.EventName.ATTRIBUTE_CHANGED,this.#c)}#c=({attributeName:e,attributeValue:t})=>{this.#_.onAttributeChanged(e,t)};connectedCallback(){this.isConnected&&setTimeout((()=>{this.#_.onConnected(a.getParent(this))}),0)}disconnectedCallback(){this.#_.onDisconnected()}attributeChangedCallback(e,t,s){this.#_.onAttributeChanged(e,s)}}const o=a;class h extends n.Z{#l=null;#r="";#u=!1;constructor(e,t,s,r=!1){super(s),this.#l=e,this.#r=t,this.#u=!!r}onRun(t){this.#u&&this.#l.setAttribute(this.#r,t);const s=new Event(e.EventName.ATTRIBUTE_CHANGED);s.attributeName=this.#r,s.attributeValue=t,this.#l.dispatchEvent(s)}}class _ extends n.Z{#l=null;#r="";#p=null;constructor(e,t,s){super(s),this.#l=e,this.#r=t}onStop(){this.#p&&this.#l.removeEventListener(this.#r,this.#p)}onRun(e){this.onStop(),this.#l.addEventListener(this.#r,e),this.#p=e}}class c extends n.Z{#l=null;constructor(e,t=""){super(`\`${t}\``),this.#l=e}onRun(e){this.#l.nodeValue=e}}class l extends n.Z{#l=null;constructor(e,t){super(t),this.#l=e}onRun(e){this.#l.value=e}}class u{static getTextMode(e,t=!1){let s=!1;return e.hasAttribute(u.Attribute.TEXT)&&(s=e.getAttribute(u.Attribute.TEXT)===u.Text.SHALLOW?u.Text.SHALLOW:u.Text.DEEP),s||t===u.Text.SHALLOW||(s=t),s}static Text={SHALLOW:"shallow",DEEP:"deep"};static Attribute={TEXT:"data-f-text",VALUE:"data-f-value"};static Prefix={ATTRIBUTE:"data-f:",ATTRIBUTE_STRING:"data-f-s:",EVENT:"data-f-on:"};#d;#b=null;#m=[];#w=null;children=[];constructor(e,t){this.children=e,this.#d=t}withParent(e){this.#w=e;for(const t of this.children)e.appendChild(t);return this}withLocals(e){return this.#b=e,this}start(e){this.#f(this.children,this.#d);for(const t of this.#m)t.start(e);return this}stop(){for(const e of this.#m)e.stop();return this}withoutParent(){if(this.#w)for(const e of this.children)this.#w.removeChild(e);return this.#w=null,this}#f(e,t){for(const s of e)switch(s.nodeType){case Node.TEXT_NODE:this.#v(s,t);break;case Node.ELEMENT_NODE:this.#x(s,t)}}#v(e,t){if(!t)return;const s=e.nodeValue;e.nodeValue="",this.#m.push(new c(e,s).withLocals(this.#b))}#x(e,t){for(const t of e.getAttributeNames())this.#k(e,t);e instanceof o||this.#f(e.childNodes,u.getTextMode(e,t))}#k(e,t){if(t===u.Attribute.VALUE)return void this.#m.push(new l(e,e.getAttribute(t)));const[s,r]=this.#g(t);if(!s)return;const n=e.getAttribute(t);switch(s===u.Prefix.ATTRIBUTE_STRING&&e.removeAttribute(t),s){case u.Prefix.ATTRIBUTE:this.#m.push(new h(e,r,n).withLocals(this.#b));break;case u.Prefix.ATTRIBUTE_STRING:this.#m.push(new h(e,r,n,!0).withLocals(this.#b));break;case u.Prefix.EVENT:this.#m.push(new _(e,r,n).withLocals(this.#b))}}#g(e){for(const t of Object.values(u.Prefix))if(e.startsWith(t))return[t,e.substring(t.length)];return["",e]}}const p=u;class d{static fromNode(e){return new d([...e.content.childNodes],p.getTextMode(e))}#n=[];#d=!1;constructor(e,t=!1){this.#n=e,this.#d=t}bake(){return new p(this.#n.map((e=>e.cloneNode(!0))),this.#d)}}const b=d,m=class{static fromElement(e){return e instanceof o?o.getInstance(e):null}static getObserver(e){return null}static defineElement(e){const t=this,s=class extends o{static ComponentImpl=t};return customElements.define(e,s),s}constructor(e){}onConnected(e){}onAttributeChanged(e,t){}onDisconnected(){}},w=class extends m{static getObserver(e){return e.#E}static template=null;#T=null;#E=null;#A=this.constructor.template?.bake();constructor(e){super(e),this.#T=e}onConnected(){if(this.#E=new r(this),!this.#A){const e=[...this.#T.childNodes];for(const t of e)this.#T.removeChild(t);this.#A=new b(e)}this.#A.withParent(this.#T).start(this.#E)}onDisconnected(){this.#A.stop().withoutParent()}};class f extends m{static Attribute={CONDITION:"data-condition"};#C=null;#T=null;#O=null;#A=null;#p=!1;constructor(e){super(e),this.#T=e,this.#A=new p([...e.childNodes].map((e=>e.cloneNode(!0)))),this.#O=e.attachShadow({mode:"open"})}onDisconnected(){this.#A.stop()}onConnected(e){this.#C=e,this.#p&&this.#y()}#y(){this.#C&&this.#A.withParent(this.#O).start(this.#C)}#P(){this.#A.stop().withoutParent()}onAttributeChanged(e,t){e===f.Attribute.CONDITION&&(t=!!t)!==this.#p&&(this.#p=t,t?this.#y():this.#P())}}f.defineElement("fuffle-if");class v extends m{static Attribute={ARRAY:"data-array",NAME:"data-name"};#C=null;#R=null;#T=null;#O=null;#A=null;#n=[];#N="it";constructor(e){super(e),this.#T=e,this.#O=e.attachShadow({mode:"open"}),this.#A=new b([...e.childNodes])}onDisconnected(){for(this.#R?.removeEventListener("write",this.#t);this.#n.length;)this.#L()}onConnected(e){this.#C=e,this.#I()}onAttributeChanged(e,t){switch(e){case v.Attribute.NAME:this.#B(t);break;case v.Attribute.ARRAY:this.#D(t)}}#B(e){this.#N=e;for(const e in this.#n)this.#n[e].withLocals(this.#S(e))}#D(e){for(this.#R?.removeEventListener("write",this.#t);this.#n.length;)this.#L();this.#R=r.fromArray(e),this.#I()}#I(){if(this.#R&&this.#C){for(const e in this.#R.target)this.#W(e);this.#R.addEventListener("write",this.#t)}}#t=({propertyPath:e,propertyValue:t})=>{if(1===e.length&&"length"===e[0]&&t!==this.#n.length){for(let e=this.#n.length;e<t;e++)this.#W(e);for(let e=this.#n.length-1;e>=t;e--)this.#L()}};#W(e,t=this.#R.target[e]){this.#n.push(this.#A.bake().withLocals(this.#S(e)).withParent(this.#O).start(this.#C))}#L(){this.#n.pop().stop().withoutParent()}#S(e){return{[this.#N]:()=>this.#R.proxy[e]}}}v.defineElement("fuffle-for")})();var __webpack_exports__Binding=__webpack_exports__.KX,__webpack_exports__BindingBase=__webpack_exports__.Oj,__webpack_exports__Component=__webpack_exports__.wA,__webpack_exports__ComponentBase=__webpack_exports__.VZ,__webpack_exports__ComponentElement=__webpack_exports__.vi,__webpack_exports__FuffleFor=__webpack_exports__.vW,__webpack_exports__FuffleIf=__webpack_exports__.d4,__webpack_exports__Observer=__webpack_exports__.Qj,__webpack_exports__Template=__webpack_exports__.YS,__webpack_exports__TemplateInstance=__webpack_exports__.R,__webpack_exports__util=__webpack_exports__.D5;export{__webpack_exports__Binding as Binding,__webpack_exports__BindingBase as BindingBase,__webpack_exports__Component as Component,__webpack_exports__ComponentBase as ComponentBase,__webpack_exports__ComponentElement as ComponentElement,__webpack_exports__FuffleFor as FuffleFor,__webpack_exports__FuffleIf as FuffleIf,__webpack_exports__Observer as Observer,__webpack_exports__Template as Template,__webpack_exports__TemplateInstance as TemplateInstance,__webpack_exports__util as util};